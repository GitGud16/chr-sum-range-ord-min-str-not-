<script lang="ts">
    import { onMount } from 'svelte';
    import L from 'leaflet';
    import 'leaflet/dist/leaflet.css';

    let mapElement: HTMLElement;
    let showOutline = true;
    let map: L.Map;
    let polygon: L.Polygon;

    // Convex Hull algorithm (Graham scan)
    function convexHull(points: number[][]): number[][] {
        if (points.length < 3) return points;

        // Find the point with the lowest y-coordinate (and leftmost if tie)
        let start = points.reduce((lowest, p) => 
            p[1] < lowest[1] || (p[1] === lowest[1] && p[0] < lowest[0]) ? p : lowest
        );

        // Sort points by polar angle with respect to start point
        let sorted = points.slice().sort((a, b) => {
            let dx1 = a[0] - start[0], dy1 = a[1] - start[1];
            let dx2 = b[0] - start[0], dy2 = b[1] - start[1];
            let cross = dx1 * dy2 - dy1 * dx2;
            if (cross !== 0) return -cross;
            return dx1 * dx1 + dy1 * dy1 - (dx2 * dx2 + dy2 * dy2);
        });

        // Build convex hull
        let hull = [start, sorted[0]];
        for (let i = 1; i < sorted.length; i++) {
            while (hull.length > 1) {
                let top = hull[hull.length - 1];
                let nextToTop = hull[hull.length - 2];
                let candidate = sorted[i];
                let dx1 = top[0] - nextToTop[0], dy1 = top[1] - nextToTop[1];
                let dx2 = candidate[0] - top[0], dy2 = candidate[1] - top[1];
                if (dx1 * dy2 - dy1 * dx2 > 0) break;
                hull.pop();
            }
            hull.push(sorted[i]);
        }

        return hull;
    }

    // Function to interpolate color based on aerosol value
    function getColor(value: number): string {
    // Define color stops using only shades of red, getting darker for higher values
    const colorStops = [
        { value: 0, color: [255, 204, 204] },  // Light red for very low values
        { value: 0.3, color: [255, 102, 102] }, // Medium red for moderate values
        { value: 0.78, color: [255, 51, 51] },  // Darker red for high values
        { value: 1, color: [139, 0, 0] }        // Darkest red for very high values
    ];

    // Cap the value at 1 to keep within typical range
    value = Math.min(value, 1);

    // Find the appropriate color range
    let lowStop = colorStops[0];
    let highStop = colorStops[colorStops.length - 1];

    for (let i = 1; i < colorStops.length; i++) {
        if (value <= colorStops[i].value) {
            lowStop = colorStops[i - 1];
            highStop = colorStops[i];
            break;
        }
    }

    // Interpolate between the two color stops
    const range = highStop.value - lowStop.value;
    const normalizedValue = (value - lowStop.value) / range;

    const r = Math.round(lowStop.color[0] + normalizedValue * (highStop.color[0] - lowStop.color[0]));
    const g = Math.round(lowStop.color[1] + normalizedValue * (highStop.color[1] - lowStop.color[1]));
    const b = Math.round(lowStop.color[2] + normalizedValue * (highStop.color[2] - lowStop.color[2]));

    return `rgb(${r}, ${g}, ${b})`;
}




    function toggleOutline() {
        showOutline = !showOutline;
        if (showOutline) {
            polygon.addTo(map);
        } else {
            polygon.remove();
        }
    }

    onMount(() => {
        // Initialize the map after the component is mounted
        map = L.map(mapElement).setView([24.7136, 46.6753], 10); // Centered on Riyadh

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Your data points with values
        const points: [number, number, number][] =[[25.185657501220703, 61.35472106933594, 2.314234972000122],[25.16065788269043, 61.25620651245117, 2.203691005706787],[25.18202781677246, 61.34667205810547, 2.478203296661377],[25.156417846679688, 61.24833679199219, 2.451566219329834],[25.334138870239258, 61.50831604003906, 2.212679862976074],[25.355154037475586, 61.594154357910156, 2.2247419357299805],[25.330726623535156, 61.49970626831055, 2.852022171020508],[25.381114959716797, 61.27085494995117, 2.2172484397888184],[25.484346389770508, 61.239322662353516, 2.0321037769317627],[30.68877601623535, 75.82276153564453, 2.364448308944702],[30.67951774597168, 75.75495910644531, 2.4632744789123535],[30.743227005004883, 75.81279754638672, 2.2641263008117676],[30.733869552612305, 75.7449722290039, 2.3626656532287598],[30.932891845703125, 75.6230239868164, 2.6891894340515137],[30.92351722717285, 75.55559539794922, 2.4341742992401123],[30.98263931274414, 75.60578918457031, 2.5486371517181396],[30.973373413085938, 75.538330078125, 2.6090519428253174],[30.964094161987305, 75.4710922241211, 2.77394437789917],[31.03687858581543, 75.5957260131836, 2.35015869140625],[31.02751350402832, 75.52824401855469, 2.516195774078369],[31.018138885498047, 75.46099853515625, 2.859466075897217],[31.21894073486328, 75.75647735595703, 2.617419719696045],[31.209653854370117, 75.68801879882812, 2.5558383464813232],[31.27350425720215, 75.74645233154297, 2.853123188018799],[31.264102935791016, 75.677978515625, 2.9872446060180664],[31.304658889770508, 72.67459106445312, 2.0827810764312744],[30.40892791748047, 63.339744567871094, 2.022775888442993],[30.459226608276367, 62.718589782714844, 2.0637524127960205],[30.457185745239258, 62.63970184326172, 2.256582498550415],[30.864501953125, 63.965232849121094, 2.066045045852661],[30.852069854736328, 63.91161346435547, 2.223586320877075],[30.839521408081055, 63.85758590698242, 2.1067636013031006],[30.826852798461914, 63.80317687988281, 2.230682134628296],[30.81406593322754, 63.74836730957031, 2.165245294570923],[30.801136016845703, 63.69307327270508, 2.250528335571289],[30.788084030151367, 63.63733673095703, 2.1488234996795654],[30.774900436401367, 63.5811767578125, 2.06626296043396],[30.761579513549805, 63.52457046508789, 2.0279393196105957],[30.542951583862305, 62.61181640625, 2.754561424255371],[30.526973724365234, 62.546295166015625, 2.406297445297241],[30.911514282226562, 64.0556869506836, 2.0970728397369385],[30.899089813232422, 64.00312042236328, 2.4292469024658203],[30.886491775512695, 63.94995880126953, 2.5811493396759033],[30.873788833618164, 63.896427154541016, 2.6257052421569824],[30.860952377319336, 63.84249496459961, 2.6508262157440186],[30.848003387451172, 63.78817367553711, 2.69787335395813],[30.834938049316406, 63.73344039916992, 2.6648128032684326],[30.82171630859375, 63.67824172973633, 2.50502872467041],[30.80837059020996, 63.62258529663086, 2.606973171234131],[30.79488754272461, 63.56648635864258, 2.563462972640991],[30.781259536743164, 63.509952545166016, 2.5092222690582275],[30.76750373840332, 63.45294952392578, 2.281456232070923],[30.753599166870117, 63.39550018310547, 2.0764987468719482],[30.557619094848633, 62.59842300415039, 2.3534886837005615],[30.54126739501953, 62.53297424316406, 2.6946661472320557],[31.008256912231445, 64.10987854003906, 2.071589708328247],[30.990182876586914, 64.03148651123047, 2.8842103481292725],[30.97797203063965, 63.97862243652344, 3.0671701431274414],[30.965639114379883, 63.925376892089844, 3.1902315616607666],[30.953197479248047, 63.871795654296875, 2.971461296081543],[30.94063949584961, 63.81776809692383, 2.8046071529388428],[30.92795181274414, 63.76332473754883, 2.650841474533081],[30.915132522583008, 63.70847702026367, 2.5002896785736084],[30.902185440063477, 63.65313720703125, 2.578566074371338],[30.88910484313965, 63.59733581542969, 2.4143359661102295],[30.87588882446289, 63.541099548339844, 2.493720531463623],[30.86252784729004, 63.48434829711914, 2.3393735885620117],[30.84903335571289, 63.427181243896484, 2.308908224105835],[30.835405349731445, 63.36954879760742, 2.1050806045532227],[30.82162857055664, 63.3114128112793, 2.04142165184021],[30.6275634765625, 62.50566101074219, 2.02445387840271],[30.611549377441406, 62.44026565551758, 2.627429723739624],[31.030839920043945, 64.0959243774414, 2.498972177505493],[31.012344360351562, 64.01754760742188, 2.6251380443573],[30.99984359741211, 63.964759826660156, 2.735100507736206],[30.98724937438965, 63.911651611328125, 2.8218905925750732],[30.974531173706055, 63.8581428527832, 2.8053035736083984],[30.961679458618164, 63.804168701171875, 2.5491788387298584],[30.94870948791504, 63.749813079833984, 2.5112876892089844],[30.935606002807617, 63.695037841796875, 2.384660482406616],[30.9223575592041, 63.63974380493164, 2.037555694580078],[30.62529182434082, 62.429527282714844, 2.257998466491699],[30.608488082885742, 62.362674713134766, 2.2781879901885986],[31.109100341796875, 64.07170867919922, 2.195655584335327],[30.69537353515625, 62.33477020263672, 2.0770697593688965],[30.67845344543457, 62.26603317260742, 2.018479824066162],[30.691560745239258, 62.25288009643555, 2.3174519538879395],[30.77862548828125, 62.22408676147461, 2.2429676055908203],[30.761762619018555, 62.155799865722656, 2.1185340881347656],[30.773666381835938, 62.14278793334961, 2.2603421211242676],[36.6356201171875, 82.0345687866211, 2.7553958892822266],[36.62751388549805, 81.9236068725586, 2.2899813652038574],[36.61941909790039, 81.8144760131836, 2.110184907913208],[36.611289978027344, 81.70610809326172, 2.2600502967834473],[36.715545654296875, 82.88861846923828, 3.8593533039093018],[36.711700439453125, 82.82540130615234, 3.7780568599700928],[36.66000747680664, 82.02532196044922, 2.656240224838257],[36.652408599853516, 81.91421508789062, 2.162018060684204],[36.644813537597656, 81.80489349365234, 2.1680023670196533],[36.637184143066406, 81.69628143310547, 2.2181599140167236],[36.799949645996094, 82.88523864746094, 3.7406649589538574],[36.79582595825195, 82.8221206665039, 3.736323356628418],[36.76279067993164, 82.3357925415039, 3.0568573474884033],[36.758689880371094, 82.27727508544922, 2.6809332370758057],[36.75456237792969, 82.2188949584961, 2.821756601333618],[36.748443603515625, 82.13300323486328, 2.3616788387298584],[36.74031448364258, 82.020263671875, 2.2442338466644287],[36.732177734375, 81.90870666503906, 2.111149549484253],[36.715877532958984, 81.6895751953125, 2.072019338607788],[36.70772933959961, 81.58198547363281, 2.2604143619537354],[36.6995735168457, 81.47550964355469, 2.2712347507476807],[36.69145202636719, 81.37085723876953, 2.6644740104675293],[36.87234115600586, 83.81134796142578, 3.044593095779419],[36.868614196777344, 83.74073791503906, 3.255725860595703],[36.864891052246094, 83.67105865478516, 2.5948994159698486],[36.78507995605469, 82.32595825195312, 3.008662700653076],[36.781246185302734, 82.26734161376953, 2.88517427444458],[36.777408599853516, 82.20897674560547, 2.5568604469299316],[36.77169418334961, 82.12297058105469, 2.3026328086853027],[36.76411437988281, 82.01004028320312, 2.2641947269439697],[36.756473541259766, 81.8983154296875, 2.172360420227051],[36.74118423461914, 81.67868041992188, 2.1736090183258057],[36.7335205078125, 81.57088470458984, 2.236461639404297],[36.725868225097656, 81.46442413330078, 2.3975918292999268],[36.71824645996094, 81.35977172851562, 2.765883207321167],[36.96538543701172, 83.88111877441406, 2.603854179382324],[36.96128845214844, 83.80912017822266, 2.5223639011383057],[36.957191467285156, 83.7379379272461, 2.4835307598114014],[36.953128814697266, 83.66805267333984, 2.43904709815979],[36.94903564453125, 83.59842681884766, 2.940300703048706],[36.9449462890625, 83.52942657470703, 2.436319589614868],[36.86682891845703, 82.32054138183594, 2.8515002727508545],[36.862735748291016, 82.26203918457031, 2.6221840381622314],[36.85863494873047, 82.20379638671875, 2.535862922668457],[36.85248947143555, 82.11727142333984, 2.2445456981658936],[36.84431457519531, 82.00360107421875, 2.02152681350708],[36.83616256713867, 81.89147186279297, 2.0436930656433105],[36.8280029296875, 81.78079223632812, 2.1673061847686768],[36.81169509887695, 81.56358337402344, 2.281245231628418],[36.80357360839844, 81.45720672607422, 2.8877477645874023],[36.991477966308594, 84.08981323242188, 2.9044668674468994],[36.987857818603516, 84.0172348022461, 2.9324002265930176],[36.984195709228516, 83.94499969482422, 2.7893757820129395],[36.980499267578125, 83.8729476928711, 2.5512290000915527],[36.97674560546875, 83.80075073242188, 2.43597412109375],[36.973026275634766, 83.72959899902344, 2.3556067943573],[36.96930694580078, 83.65959167480469, 2.550873041152954],[36.965572357177734, 83.58988952636719, 2.7030956745147705],[36.96182632446289, 83.52088165283203, 2.6923983097076416],[36.93169403076172, 82.99046325683594, 2.4095797538757324],[36.885799407958984, 82.25231170654297, 2.403174638748169],[36.881988525390625, 82.19400787353516, 2.5842158794403076],[36.87623596191406, 82.10733795166016, 2.2424023151397705],[36.86861038208008, 81.99345397949219, 2.0676486492156982],[36.860958099365234, 81.8811264038086, 2.1582329273223877],[36.85332489013672, 81.77040100097656, 2.226980447769165],[36.845680236816406, 81.66105651855469, 2.035165309906006],[37.10208511352539, 84.4693374633789, 3.282550811767578],[37.098114013671875, 84.39250946044922, 3.2287142276763916],[37.09007263183594, 84.23960876464844, 3.005119562149048],[37.08601379394531, 84.16400909423828, 2.9224467277526855],[37.081993103027344, 84.08979797363281, 2.6432864665985107],[37.07793045043945, 84.01568603515625, 2.5564379692077637],[37.073883056640625, 83.94280242919922, 2.456467390060425],[37.06983184814453, 83.8705062866211, 2.4137513637542725],[37.065731048583984, 83.79817199707031, 2.23995304107666],[37.06162643432617, 83.72644805908203, 2.2527449131011963],[37.05756378173828, 83.65624237060547, 2.3548295497894287],[37.053466796875, 83.58625030517578, 2.4104061126708984],[37.049381256103516, 83.51693725585938, 2.3268368244171143],[37.04530715942383, 83.44865417480469, 2.439007520675659],[37.04121017456055, 83.38047790527344, 2.485917091369629],[37.037109375, 83.3129653930664, 2.448899269104004],[37.03303527832031, 83.24651336669922, 2.7117130756378174],[37.028953552246094, 83.18064880371094, 2.3452529907226562],[37.02488708496094, 83.11536407470703, 2.1662240028381348],[37.02079391479492, 83.05036163330078, 2.069486379623413],[37.016685485839844, 82.98558807373047, 2.0696184635162354],[37.01256561279297, 82.9212646484375, 2.277247190475464],[36.963069915771484, 82.18653869628906, 2.1760995388031006],[36.95691680908203, 82.0995864868164, 2.2034480571746826],[36.94873046875, 81.98548889160156, 2.30407977104187],[36.93242645263672, 81.76223754882812, 2.438250780105591],[36.92430877685547, 81.65312194824219, 2.4171135425567627],[37.117103576660156, 84.53852844238281, 3.477409839630127],[37.11354446411133, 84.46099853515625, 3.263819456100464],[37.10993194580078, 84.3836441040039, 3.121634006500244],[37.106327056884766, 84.30681610107422, 3.1363134384155273],[37.102684020996094, 84.2305679321289, 3.0970022678375244],[37.09902572631836, 84.15508270263672, 2.9863386154174805],[37.095375061035156, 84.08074188232422, 2.5473053455352783],[37.0916862487793, 84.00654602050781, 2.524296998977661],[37.08800506591797, 83.93354797363281, 2.442582845687866],[37.084327697753906, 83.86122131347656, 2.306166410446167],[37.08059310913086, 83.78874206542969, 2.118009328842163],[37.076847076416016, 83.71707153320312, 2.1749019622802734],[37.07313537597656, 83.64684295654297, 2.257028341293335],[37.06940841674805, 83.5767593383789, 2.361715078353882],[37.06565475463867, 83.50736999511719, 2.2720096111297607],[37.06192398071289, 83.4390640258789, 2.418006658554077],[37.05816650390625, 83.37083435058594, 2.5197980403900146],[37.05440139770508, 83.30329132080078, 2.403729200363159],[37.0506591796875, 83.23674011230469, 2.518385171890259],[37.046905517578125, 83.17081451416016, 2.1228411197662354],[37.043148040771484, 83.10537719726562, 2.2016685009002686],[37.03937911987305, 83.0403060913086, 2.1828036308288574],[37.035579681396484, 82.97552490234375, 2.094592571258545],[37.03177261352539, 82.91107177734375, 2.0729105472564697],[37.020294189453125, 82.72021484375, 2.0669798851013184],[36.98965835571289, 82.23417663574219, 2.006758689880371],[37.21385955810547, 84.6180648803711, 3.695136070251465],[37.209869384765625, 84.5384292602539, 3.5787482261657715],[37.20585250854492, 84.45933532714844, 3.108264923095703],[37.20188522338867, 84.3820571899414, 3.017634630203247],[37.19790267944336, 84.30554962158203, 2.806912422180176],[37.19389724731445, 84.22930908203125, 2.736949920654297],[37.18988037109375, 84.15396118164062, 2.6198928356170654],[37.18583679199219, 84.0790786743164, 2.478943109512329],[37.181758880615234, 84.00444793701172, 2.4943747520446777],[37.17770004272461, 83.93077850341797, 2.4608588218688965],[37.17365264892578, 83.85816955566406, 2.4042465686798096],[37.1695556640625, 83.78565979003906, 2.149425983428955],[37.165462493896484, 83.71373748779297, 2.112673282623291],[37.16138458251953, 83.64287567138672, 2.052793264389038],[37.15732192993164, 83.57300567626953, 2.13120174407959],[37.153221130371094, 83.50328063964844, 2.1710033416748047],[37.14912796020508, 83.43437194824219, 2.1243810653686523],[37.060752868652344, 82.0807876586914, 2.3308684825897217],[37.052574157714844, 81.9662857055664, 2.1274361610412598],[36.924259185791016, 80.33580017089844, 2.247544765472412],[36.9163703918457, 80.24388885498047, 2.0812413692474365],[37.228572845458984, 84.69139862060547, 4.455245018005371],[37.22509002685547, 84.61260986328125, 3.7062532901763916],[37.22149658203125, 84.53260803222656, 3.2693769931793213],[37.217891693115234, 84.45341491699219, 3.0532047748565674],[37.214324951171875, 84.3760757446289, 2.9944608211517334],[37.21073913574219, 84.29966735839844, 2.811643600463867],[37.207115173339844, 84.22340393066406, 2.81242299079895],[37.2034912109375, 84.1480484008789, 2.690784454345703],[37.199832916259766, 84.0730972290039, 2.4943971633911133],[37.19614791870117, 83.99832916259766, 2.6845152378082275],[37.192447662353516, 83.92459869384766, 2.554241180419922],[37.18876266479492, 83.85187530517578, 2.4973175525665283],[37.18505096435547, 83.7793197631836, 2.225843667984009],[37.181312561035156, 83.70730590820312, 2.1480443477630615],[37.177581787109375, 83.63641357421875, 2.053982973098755],[37.17387390136719, 83.56645965576172, 2.0156915187835693],[37.17012023925781, 83.49665832519531, 2.054760217666626],[37.1551399230957, 83.2248306274414, 2.0094010829925537],[37.1513671875, 83.1583023071289, 2.0370728969573975],[37.090293884277344, 82.15940856933594, 2.0955917835235596],[37.08457565307617, 82.07233428955078, 2.4755258560180664],[37.076927185058594, 81.95770263671875, 2.325242757797241],[36.95602035522461, 80.32604217529297, 2.4074783325195312],[37.341678619384766, 85.10637664794922, 2.7638802528381348],[37.330074310302734, 84.85567474365234, 3.6852915287017822],[37.32617950439453, 84.77412414550781, 3.7542314529418945],[37.32225799560547, 84.69282531738281, 3.6520864963531494],[37.318267822265625, 84.61178588867188, 3.398580312728882],[37.31424331665039, 84.5307388305664, 3.0580623149871826],[37.31019592285156, 84.45063018798828, 3.013068199157715],[37.30619430541992, 84.37239074707031, 3.103480339050293],[37.30222702026367, 84.29572296142578, 2.8739516735076904],[37.29827117919922, 84.22000885009766, 2.747229814529419],[37.29427719116211, 84.14485168457031, 2.631889581680298],[37.29026794433594, 84.06996154785156, 2.586662769317627],[37.28620147705078, 83.99491882324219, 2.8904333114624023],[37.28213119506836, 83.92083740234375, 2.3236916065216064],[37.2780876159668, 83.84791564941406, 2.331319570541382],[37.274017333984375, 83.77539825439453, 2.265716075897217],[37.26991653442383, 83.7031478881836, 2.0858328342437744],[37.265830993652344, 83.63186645507812, 2.0195372104644775],[37.22075271606445, 82.88931274414062, 2.3305726051330566],[37.21662902832031, 82.82511138916016, 2.1086349487304688],[37.157066345214844, 81.94966125488281, 2.0411815643310547],[37.14891815185547, 81.83673095703125, 2.1336283683776855],[37.140804290771484, 81.72552490234375, 2.3291985988616943],[37.08439254760742, 80.98932647705078, 3.0939910411834717],[37.07640838623047, 80.8897933959961, 2.3947315216064453],[37.349571228027344, 85.09725952148438, 2.7924928665161133],[37.34614944458008, 85.01256561279297, 2.804755210876465],[37.34271240234375, 84.928955078125, 3.086353063583374],[37.339271545410156, 84.84666442871094, 3.3476569652557373],[37.3358039855957, 84.7651596069336, 3.4038898944854736],[37.33229446411133, 84.6838150024414, 3.4219748973846436],[37.328731536865234, 84.60242462158203, 3.2969324588775635],[37.32512664794922, 84.52140808105469, 3.0156266689300537],[37.32149124145508, 84.4412841796875, 2.984220266342163],[37.317893981933594, 84.363037109375, 2.949037790298462],[37.314334869384766, 84.2862777709961, 2.7467234134674072],[37.31074905395508, 84.21055603027344, 2.5925755500793457],[37.307159423828125, 84.13542175292969, 2.533226251602173],[37.30352020263672, 84.0604248046875, 2.7392539978027344],[37.29981994628906, 83.98534393310547, 2.540898323059082],[37.29615020751953, 83.91133117675781, 2.3586199283599854],[37.29246520996094, 83.83831787109375, 2.3569703102111816],[37.28875732421875, 83.76576232910156, 2.261645555496216],[37.2850227355957, 83.69342041015625, 2.0660414695739746],[37.281307220458984, 83.62216186523438, 2.0346429347991943],[37.277587890625, 83.55170440673828, 2.0207126140594482],[37.24748992919922, 83.0090103149414, 2.0107369422912598],[37.232295989990234, 82.75092315673828, 2.0896339416503906],[37.2055778503418, 82.31861877441406, 2.0282235145568848],[37.17313766479492, 81.82555389404297, 2.066145181655884],[37.16554260253906, 81.71427917480469, 2.315430164337158],[37.11250686645508, 80.97756958007812, 3.3555235862731934],[37.10497283935547, 80.87796020507812, 2.699063301086426],[37.445220947265625, 85.09687042236328, 2.8690173625946045],[37.44137954711914, 85.01174926757812, 2.6262924671173096],[37.43753433227539, 84.92805480957031, 3.0755624771118164],[37.433658599853516, 84.84523010253906, 2.777717351913452],[37.429771423339844, 84.76335906982422, 3.103839874267578],[37.42587661743164, 84.68209075927734, 3.2166309356689453],[37.421878814697266, 84.60027313232422, 3.1945383548736572],[37.417842864990234, 84.518798828125, 3.0732581615448],[37.41382598876953, 84.4384994506836, 2.8800888061523438],[37.409820556640625, 84.35977935791016, 2.7848997116088867],[37.40583801269531, 84.28227996826172, 2.670193910598755],[37.40185546875, 84.20588684082031, 2.650306463241577],[37.397884368896484, 84.13054656982422, 2.556492328643799],[37.39389419555664, 84.05579376220703, 2.6144754886627197],[37.389854431152344, 83.98078155517578, 2.6103410720825195],[37.385807037353516, 83.90680694580078, 2.575927257537842],[37.38175964355469, 83.83352661132812, 2.3953611850738525],[37.37767791748047, 83.7606201171875, 2.2550599575042725],[37.37359619140625, 83.6881332397461, 2.156571388244629],[37.369529724121094, 83.61678314208984, 2.164839267730713],[37.36545944213867, 83.54618835449219, 2.217721939086914],[37.34088134765625, 83.13436889648438, 2.053363084793091],[37.336769104003906, 83.06776428222656, 2.216498613357544],[37.328556060791016, 82.9363784790039, 2.076141119003296],[37.32034683227539, 82.8072738647461, 2.0150551795959473],[37.24463653564453, 81.70597839355469, 2.056922674179077],[37.117366790771484, 80.114990234375, 2.1877431869506836],[37.45713806152344, 85.17591094970703, 2.435445785522461],[37.45370864868164, 85.08894348144531, 2.7060701847076416],[37.45029830932617, 85.0038070678711, 2.5096096992492676],[37.446895599365234, 84.9200668334961, 2.8984756469726562],[37.443458557128906, 84.8373031616211, 2.71466064453125],[37.43998718261719, 84.75530242919922, 3.059443235397339],[37.43649673461914, 84.67391967773438, 3.0877139568328857],[37.432926177978516, 84.59199523925781, 3.1727654933929443],[37.429317474365234, 84.51042938232422, 3.149137496948242],[37.42571258544922, 84.43021392822266, 2.872394323348999],[37.422115325927734, 84.35147094726562, 2.765671968460083],[37.41853713989258, 84.27392578125, 2.6494457721710205],[37.414939880371094, 84.19746398925781, 2.576202154159546],[37.41135025024414, 84.12200164794922, 2.483532667160034],[37.40773010253906, 84.04716491699219, 2.5745832920074463],[37.404075622558594, 83.97211456298828, 2.736257314682007],[37.40040588378906, 83.89810180664062, 2.612454414367676],[37.39672088623047, 83.82471466064453, 2.303569793701172],[37.39300537109375, 83.75159454345703, 2.2742621898651123],[37.38928985595703, 83.67925262451172, 2.2097601890563965],[37.38557052612305, 83.60782623291016, 2.33644962310791],[37.381866455078125, 83.53716278076172, 2.212383270263672],[37.36686706542969, 83.2599868774414, 2.0425961017608643],[37.36310958862305, 83.1922378540039, 2.3703248500823975],[37.35932159423828, 83.12489318847656, 2.150063991546631],[37.35554504394531, 83.05821990966797, 2.0997793674468994],[37.35176086425781, 82.99219512939453, 2.013594388961792],[37.34797668457031, 82.92669677734375, 2.022949457168579],[37.34039306640625, 82.79749298095703, 2.192487955093384],[37.332786560058594, 82.67015838623047, 2.0121703147888184],[37.32898712158203, 82.60736083984375, 2.209641695022583],[37.325164794921875, 82.54498291015625, 2.000837802886963],[37.32136154174805, 82.4831314086914, 2.0039093494415283],[37.317543029785156, 82.42181396484375, 2.0601837635040283],[37.313724517822266, 82.36102294921875, 2.049861192703247],[37.30992889404297, 82.30069732666016, 2.0971617698669434],[37.306114196777344, 82.24087524414062, 2.1290740966796875],[37.30229949951172, 82.1815414428711, 2.081289768218994],[37.29849624633789, 82.12263488769531, 2.0724198818206787],[37.29277038574219, 82.03519439697266, 2.059185028076172],[37.28515625, 81.92024993896484, 2.0579583644866943],[37.27754592895508, 81.80697631835938, 2.0666253566741943],[37.26993942260742, 81.69544219970703, 2.150341510772705],[37.262359619140625, 81.58565521240234, 2.2623136043548584],[37.54941177368164, 85.08809661865234, 2.4009242057800293],[37.545555114746094, 85.00261688232422, 2.6026318073272705],[37.54169464111328, 84.91824340820312, 2.5378801822662354],[37.537841796875, 84.83512878417969, 2.7090156078338623],[37.5339469909668, 84.75248718261719, 2.8760712146759033],[37.530025482177734, 84.6705322265625, 3.1429929733276367],[37.52606201171875, 84.58871459960938, 3.1384241580963135],[37.52204513549805, 84.50715637207031, 3.0483875274658203],[37.518043518066406, 84.42688751220703, 2.883910894393921],[37.51405715942383, 84.34793090820312, 2.6908788681030273],[37.510074615478516, 84.2701416015625, 2.5341246128082275],[37.50608825683594, 84.1932601928711, 2.5203263759613037],[37.502113342285156, 84.11736297607422, 2.457071542739868],[37.49811553955078, 84.04216003417969, 2.5956203937530518],[37.49409484863281, 83.96725463867188, 2.7319793701171875],[37.49003601074219, 83.8928451538086, 2.6931514739990234],[37.48597717285156, 83.8189468383789, 2.526179552078247],[37.48189926147461, 83.7457275390625, 2.3296847343444824],[37.46969223022461, 83.53071594238281, 2.001366376876831],[37.42463684082031, 82.7900161743164, 2.003418207168579],[37.41643142700195, 82.66265106201172, 2.369555711746216],[37.41232681274414, 82.59976196289062, 2.3503642082214355],[37.40821838378906, 82.53739166259766, 2.1531708240509033],[37.40412139892578, 82.47544860839844, 2.0919816493988037],[37.400028228759766, 82.4140853881836, 2.1270596981048584],[37.39591598510742, 82.35322570800781, 2.1951186656951904],[37.391822814941406, 82.2928237915039, 2.3207879066467285],[37.38773727416992, 82.2330322265625, 2.546377182006836],[37.38365173339844, 82.17363739013672, 2.629678249359131],[37.379573822021484, 82.11466217041016, 2.629241466522217],[37.373451232910156, 82.02723693847656, 2.5999739170074463],[37.36529541015625, 81.91221618652344, 2.5717639923095703],[37.357173919677734, 81.79889678955078, 2.5616188049316406],[37.349056243896484, 81.68721008300781, 2.3324739933013916],[37.34096145629883, 81.5772933959961, 2.2286126613616943],[37.33291244506836, 81.46934509277344, 2.286924362182617],[37.55723190307617, 85.07884979248047, 2.275660753250122],[37.553836822509766, 84.993408203125, 2.6158907413482666],[37.550418853759766, 84.90899658203125, 2.6347289085388184],[37.5469856262207, 84.82577514648438, 2.66949725151062],[37.543521881103516, 84.74309539794922, 2.846191167831421],[37.54001998901367, 84.66102600097656, 3.1836585998535156],[37.53647994995117, 84.57913208007812, 3.0904343128204346],[37.532894134521484, 84.49761199951172, 3.0131962299346924],[37.5293083190918, 84.41734313964844, 2.940330743789673],[37.525726318359375, 84.3385009765625, 2.752303123474121],[37.52214813232422, 84.26062774658203, 2.596003293991089],[37.51856231689453, 84.18377685546875, 2.6356780529022217],[37.51496505737305, 84.10781860351562, 2.5750043392181396],[37.511348724365234, 84.03248596191406, 2.5839102268218994],[37.5077018737793, 83.95744323730469, 2.605999708175659],[37.504032135009766, 83.88297271728516, 2.5814077854156494],[37.50033950805664, 83.80897521972656, 2.6977014541625977],[37.496646881103516, 83.7358169555664, 2.497039318084717],[37.49293899536133, 83.66343688964844, 2.1237261295318604],[37.48924255371094, 83.59172058105469, 2.072594404220581],[37.485504150390625, 83.52059936523438, 2.0459253787994385],[37.47804260253906, 83.38042449951172, 2.0557663440704346],[37.474300384521484, 83.31132507324219, 2.094210624694824],[37.470558166503906, 83.242919921875, 2.0260844230651855],[37.46678924560547, 83.1750259399414, 2.01458477973938],[37.46303176879883, 83.10765838623047, 2.0204484462738037],[37.45547866821289, 82.974609375, 2.025869607925415],[37.44414138793945, 82.77954864501953, 2.0366709232330322],[37.436546325683594, 82.65204620361328, 2.2640440464019775],[37.43274688720703, 82.58912658691406, 2.6159491539001465],[37.428955078125, 82.5267105102539, 2.2977545261383057],[37.425148010253906, 82.46477508544922, 2.199592351913452],[37.42133712768555, 82.40332794189453, 2.327608346939087],[37.41752243041992, 82.34243774414062, 2.5462234020233154],[37.413726806640625, 82.28204345703125, 2.759732484817505],[37.40992736816406, 82.22215270996094, 2.9067516326904297],[37.4061164855957, 82.16265106201172, 2.9056437015533447],[37.40230178833008, 82.10372924804688, 2.9298150539398193],[37.396610260009766, 82.01625061035156, 3.052913188934326],[37.38901138305664, 81.90113830566406, 3.1588234901428223],[37.381412506103516, 81.7877197265625, 2.9324798583984375],[37.37382507324219, 81.67601776123047, 2.596362590789795],[37.366241455078125, 81.56600189208984, 2.405757427215576],[37.35869216918945, 81.45793151855469, 2.351046085357666],[37.649085998535156, 84.99163818359375, 2.1256728172302246],[37.645225524902344, 84.90679168701172, 2.4896085262298584],[37.64136505126953, 84.82292938232422, 2.7326040267944336],[37.637474060058594, 84.73985290527344, 2.9654455184936523],[37.633548736572266, 84.65724182128906, 3.0836801528930664],[37.629600524902344, 84.5754623413086, 3.050544500350952],[37.62565231323242, 84.494384765625, 2.9816064834594727],[37.62165832519531, 84.41412353515625, 2.9665162563323975],[37.617679595947266, 84.33503723144531, 2.990705728530884],[37.61370849609375, 84.25685119628906, 2.868589162826538],[37.60971450805664, 84.1795425415039, 2.763343572616577],[37.6057243347168, 84.10302734375, 2.6333959102630615],[37.60169982910156, 84.02690124511719, 2.670368194580078],[37.597679138183594, 83.95149230957031, 2.570964813232422],[37.59363555908203, 83.87680053710938, 2.46315598487854],[37.589576721191406, 83.80276489257812, 2.4728338718414307],[37.58551788330078, 83.72945404052734, 2.2963201999664307],[37.58145523071289, 83.6568832397461, 2.2465555667877197],[37.577388763427734, 83.5851058959961, 2.159811496734619],[37.57332992553711, 83.51394653320312, 2.0815024375915527],[37.56925964355469, 83.44355010986328, 2.2099199295043945],[37.565189361572266, 83.37369537353516, 2.0663673877716064],[37.56110763549805, 83.30451965332031, 2.0764458179473877],[37.557029724121094, 83.23595428466797, 2.0247082710266113],[37.552940368652344, 83.16796112060547, 2.1199533939361572],[37.54884719848633, 83.10054779052734, 2.253070592880249],[37.54475784301758, 83.0336685180664, 2.11366868019104],[37.54065704345703, 82.96731567382812, 2.1095969676971436],[37.53656768798828, 82.90167999267578, 2.0252649784088135],[37.532474517822266, 82.83660888671875, 2.0233829021453857],[37.52018356323242, 82.64450073242188, 2.069307565689087],[37.51609420776367, 82.58157348632812, 2.115892171859741],[37.51200866699219, 82.51909637451172, 2.117733955383301],[37.507904052734375, 82.45713806152344, 2.2576119899749756],[37.503814697265625, 82.39566802978516, 2.6515610218048096],[37.49972915649414, 82.3347396850586, 3.0113437175750732],[37.49563217163086, 82.2742919921875, 3.1542229652404785],[37.49155044555664, 82.21430969238281, 3.099787950515747],[37.487464904785156, 82.15479278564453, 3.174609422683716],[37.48338317871094, 82.0958480834961, 3.4779930114746094],[37.477291107177734, 82.00833892822266, 3.7947263717651367],[37.46916198730469, 81.89311981201172, 3.9830148220062256],[37.461036682128906, 81.77955627441406, 4.049750804901123],[37.45293426513672, 81.66776275634766, 3.4816296100616455],[37.44485855102539, 81.557861328125, 3.125593662261963],[37.43681335449219, 81.44947052001953, 3.22359299659729],[37.42072677612305, 81.23690795898438, 2.53629732131958],[37.41270446777344, 81.1327896118164, 2.286818504333496],[37.654605865478516, 84.9012222290039, 2.2210819721221924],[37.65117263793945, 84.81725311279297, 2.667255401611328],[37.64772033691406, 84.73404693603516, 3.0138654708862305],[37.64421081542969, 84.65131378173828, 3.1665966510772705],[37.640689849853516, 84.56948852539062, 3.179830312728882],[37.637149810791016, 84.48841094970703, 3.0119030475616455],[37.63359451293945, 84.40812683105469, 2.9588518142700195],[37.630035400390625, 84.3289794921875, 3.0033929347991943],[37.62643814086914, 84.25072479248047, 2.963064432144165],[37.62285232543945, 84.17333984375, 2.864839553833008],[37.61923599243164, 84.0965805053711, 2.743800401687622],[37.6156005859375, 84.02031707763672, 2.7485501766204834],[37.61194610595703, 83.94483184814453, 2.4697396755218506],[37.60828399658203, 83.87005615234375, 2.4948954582214355],[37.60459899902344, 83.79598999023438, 2.5903313159942627],[37.60091018676758, 83.72256469726562, 2.6256186962127686],[37.59721755981445, 83.64996337890625, 2.4308202266693115],[37.59352111816406, 83.57811737060547, 2.4890658855438232],[37.58981704711914, 83.50692749023438, 2.3920042514801025],[37.586097717285156, 83.43643188476562, 2.2859015464782715],[37.582366943359375, 83.36656188964844, 2.2003588676452637],[37.57863235473633, 83.29728698730469, 2.13435435295105],[37.574893951416016, 83.22863006591797, 2.1523025035858154],[37.57115173339844, 83.16056060791016, 2.233773708343506],[37.563621520996094, 83.0261459350586, 2.437366247177124],[37.55985641479492, 82.95972442626953, 2.3793246746063232],[37.55608367919922, 82.8940200805664, 2.1875100135803223],[37.55230712890625, 82.82886505126953, 2.1223695278167725],[37.54852294921875, 82.76426696777344, 2.021817922592163],[37.544742584228516, 82.70012664794922, 2.1264214515686035],[37.54095458984375, 82.63658142089844, 2.200112819671631],[37.53717041015625, 82.57362365722656, 2.2328879833221436],[37.53337097167969, 82.51106262207031, 2.2583816051483154],[37.52957534790039, 82.44903564453125, 2.365647554397583],[37.52577590942383, 82.3875732421875, 2.810436487197876],[37.52197265625, 82.32658386230469, 3.2853715419769287],[37.5181884765625, 82.26605224609375, 3.518345832824707],[37.51438522338867, 82.2060317993164, 3.376861810684204],[37.51058578491211, 82.14649200439453, 3.4380927085876465],[37.50678634643555, 82.08747863769531, 4.010550022125244],[37.501102447509766, 81.9998779296875, 4.161957263946533],[37.493507385253906, 81.88451385498047, 4.394445896148682],[37.48591613769531, 81.77083587646484, 4.3906168937683105],[37.478328704833984, 81.65898895263672, 4.177745342254639],[37.47077560424805, 81.5489501953125, 3.90032958984375],[37.46322250366211, 81.44039916992188, 3.5262725353240967],[37.44809341430664, 81.22758483886719, 2.8784658908843994],[37.440547943115234, 81.12334442138672, 2.3889577388763428],[37.745548248291016, 84.81364440917969, 2.1576452255249023],[37.741668701171875, 84.73004913330078, 2.8404886722564697],[37.73774719238281, 84.64718627929688, 3.1506175994873047],[37.73381423950195, 84.56524658203125, 3.3507039546966553],[37.729881286621094, 84.48409271240234, 3.2324657440185547],[37.72591018676758, 84.40374755859375, 2.9848415851593018],[37.72193908691406, 84.32427978515625, 2.888455390930176],[37.71797561645508, 84.24585723876953, 2.7715375423431396],[37.71397399902344, 84.16802215576172, 2.6818459033966064],[37.70997619628906, 84.09081268310547, 2.6444640159606934],[37.70594787597656, 84.0143814086914, 2.6317145824432373],[37.701927185058594, 83.9386978149414, 2.421802520751953],[37.69789123535156, 83.86380767822266, 2.5166149139404297],[37.693851470947266, 83.78971099853516, 2.773451089859009],[37.689796447753906, 83.71633911132812, 3.0146286487579346],[37.68575668334961, 83.64364624023438, 2.9634037017822266],[37.68170928955078, 83.57168579101562, 2.9423887729644775],[37.67764663696289, 83.50044250488281, 2.949585199356079],[37.673587799072266, 83.42982482910156, 2.938788652420044],[37.66952133178711, 83.35981750488281, 2.7331221103668213],[37.66544723510742, 83.29042053222656, 2.5861809253692627],[37.66136932373047, 83.22162628173828, 2.2773563861846924],[37.65729904174805, 83.15345001220703, 2.061635971069336],[37.6532096862793, 83.0858383178711, 2.1812491416931152],[37.649131774902344, 83.01890563964844, 2.1878368854522705],[37.64503479003906, 82.95244598388672, 2.1787214279174805],[37.640953063964844, 82.88665008544922, 2.3079283237457275],[37.636871337890625, 82.82147216796875, 2.2941620349884033],[37.63277816772461, 82.75677490234375, 2.0800116062164307],[37.62868881225586, 82.69263458251953, 2.124858856201172],[37.62459945678711, 82.62890625, 2.2409610748291016],[37.62051010131836, 82.56585693359375, 2.2563750743865967],[37.616424560546875, 82.50335693359375, 2.2940967082977295],[37.61234664916992, 82.44133758544922, 2.475541830062866],[37.60826873779297, 82.37982177734375, 2.9149014949798584],[37.60417175292969, 82.31878662109375, 3.1746041774749756],[37.60009765625, 82.25823211669922, 3.6592791080474854],[37.596012115478516, 82.1981201171875, 4.253316402435303],[37.591941833496094, 82.13850402832031, 4.698301315307617],[37.587852478027344, 82.07925415039062, 4.824184417724609],[37.581764221191406, 81.99163818359375, 4.821619987487793],[37.573673248291016, 81.87651062011719, 4.982095718383789],[37.5655632019043, 81.76286315917969, 3.8722312450408936],[37.557472229003906, 81.65096282958984, 4.39940071105957],[37.549400329589844, 81.5406723022461, 4.192781925201416],[37.541358947753906, 81.43208312988281, 3.459916591644287],[37.477535247802734, 80.61384582519531, 2.6046667098999023],[37.469642639160156, 80.5174560546875, 2.7977983951568604],[37.751190185546875, 84.72049713134766, 2.7101802825927734],[37.74769973754883, 84.63761138916016, 3.1238346099853516],[37.74418258666992, 84.55565643310547, 3.427032232284546],[37.74066925048828, 84.47450256347656, 3.404306650161743],[37.73712158203125, 84.39411163330078, 3.178670644760132],[37.73356628417969, 84.31465148925781, 3.066892623901367],[37.72998046875, 84.23612976074219, 2.942715644836426],[37.72639083862305, 84.15817260742188, 2.72719407081604],[37.72277069091797, 84.08096313476562, 2.711149215698242],[37.71914291381836, 84.00448608398438, 2.675450086593628],[37.71549987792969, 83.92878723144531, 2.682307481765747],[37.711849212646484, 83.85385131835938, 2.7964696884155273],[37.708187103271484, 83.77970886230469, 2.9796645641326904],[37.70451354980469, 83.70634460449219, 3.0671732425689697],[37.70083236694336, 83.63361358642578, 3.058748245239258],[37.6971435546875, 83.56168365478516, 3.0680272579193115],[37.69345474243164, 83.49042510986328, 3.199237585067749],[37.68973922729492, 83.41969299316406, 3.2206270694732666],[37.68601989746094, 83.34964752197266, 3.1078739166259766],[37.68229293823242, 83.28025817871094, 2.951758623123169],[37.678558349609375, 83.21139526367188, 2.7018086910247803],[37.67479705810547, 83.14313507080078, 2.1914515495300293],[37.67106246948242, 83.07553100585938, 2.162735939025879],[37.66730880737305, 83.00853729248047, 2.1738924980163574],[37.663551330566406, 82.9420394897461, 2.3120620250701904],[37.659786224365234, 82.87623596191406, 2.4162979125976562],[37.65602493286133, 82.81104278564453, 2.7362940311431885],[37.65225601196289, 82.74629211425781, 2.4689910411834717],[37.648475646972656, 82.68208312988281, 2.3002586364746094],[37.644683837890625, 82.61824035644531, 2.2423293590545654],[37.640907287597656, 82.55522155761719, 2.3056771755218506],[37.637123107910156, 82.49264526367188, 2.456409454345703],[37.633338928222656, 82.43062591552734, 2.8512589931488037],[37.629554748535156, 82.36907958984375, 3.5023128986358643],[37.6181640625, 82.18701171875, 4.442292213439941],[37.61436462402344, 82.12714385986328, 4.946486949920654],[37.61056137084961, 82.06780242919922, 5.0],[37.58979034423828, 81.75178527832031, 4.050817012786865],[37.582218170166016, 81.63983154296875, 4.5403289794921875],[37.57465362548828, 81.52943420410156, 4.446206092834473],[37.56711196899414, 81.4207992553711, 3.1671676635742188],[37.5595588684082, 81.31346893310547, 2.687241554260254],[37.55200958251953, 81.20758056640625, 2.042635440826416],[37.54447555541992, 81.10318756103516, 2.0987391471862793],[37.506954193115234, 80.60185241699219, 3.005039691925049],[37.49949645996094, 80.50537109375, 2.8512017726898193],[37.84120178222656, 84.63284301757812, 2.465893507003784],[37.837284088134766, 84.55062866210938, 2.854318857192993],[37.83335494995117, 84.46940612792969, 3.1745386123657227],[37.829410552978516, 84.38895416259766, 3.2782795429229736],[37.82544708251953, 84.30924987792969, 3.106999397277832],[37.82148361206055, 84.2303466796875, 2.6253113746643066],[37.81748962402344, 84.1522216796875, 2.603044271469116],[37.81349563598633, 84.07488250732422, 2.7279980182647705],[37.809486389160156, 83.9983139038086, 2.773982286453247],[37.80546951293945, 83.92255401611328, 2.708847999572754],[37.80145263671875, 83.84757995605469, 2.989018201828003],[37.79743194580078, 83.77336883544922, 2.8868472576141357],[37.79340744018555, 83.69986724853516, 2.9600799083709717],[37.789363861083984, 83.62713623046875, 2.9414517879486084],[37.78533172607422, 83.55518341064453, 3.0588693618774414],[37.78128433227539, 83.48379516601562, 2.9824740886688232],[37.777225494384766, 83.41299438476562, 3.142369270324707],[37.77317428588867, 83.34284973144531, 2.9610555171966553],[37.76911163330078, 83.27336120605469, 2.8068530559539795],[37.76504135131836, 83.20439910888672, 2.9103479385375977],[37.7609748840332, 83.13606262207031, 2.8855841159820557],[37.756893157958984, 83.06835174560547, 2.696446418762207],[37.7528076171875, 83.00121307373047, 2.559551239013672],[37.748741149902344, 82.93478393554688, 2.641414165496826],[37.74058532714844, 82.80358123779297, 2.5885775089263916],[37.7364501953125, 82.7380599975586, 3.2204480171203613],[37.72825622558594, 82.60945892333984, 2.962709903717041],[37.72416305541992, 82.54623413085938, 2.527970790863037],[37.7200927734375, 82.4836654663086, 2.7166495323181152],[37.66134262084961, 81.63162994384766, 4.677327632904053],[37.653282165527344, 81.52118682861328, 4.861893177032471],[37.6452522277832, 81.41249084472656, 3.184365749359131],[37.63720703125, 81.30498504638672, 2.918416738510132],[37.62919616699219, 81.1990737915039, 2.0788655281066895],[37.8516845703125, 84.62421417236328, 2.29614520072937],[37.84819030761719, 84.54188537597656, 2.7973687648773193],[37.84468078613281, 84.46062469482422, 3.058736562728882],[37.841156005859375, 84.38015747070312, 3.1872379779815674],[37.83760452270508, 84.30040740966797, 3.101327657699585],[37.834022521972656, 84.2214126586914, 2.8915112018585205],[37.83043670654297, 84.14327239990234, 2.9656121730804443],[37.826839447021484, 84.06590270996094, 2.9770889282226562],[37.823219299316406, 83.9892807006836, 2.841867685317993],[37.8195915222168, 83.91352081298828, 2.795886993408203],[37.81594467163086, 83.8384780883789, 2.9304802417755127],[37.81230163574219, 83.76425170898438, 2.820312738418579],[37.80863952636719, 83.69065856933594, 2.73813796043396],[37.80497360229492, 83.617919921875, 2.8162291049957275],[37.801292419433594, 83.54588317871094, 2.9642696380615234],[37.79759979248047, 83.47445678710938, 2.875713348388672],[37.793907165527344, 83.40363311767578, 2.8643035888671875],[37.79019546508789, 83.33340454101562, 2.8738460540771484],[37.786476135253906, 83.26388549804688, 2.631870985031128],[37.782745361328125, 83.19487762451172, 2.8338935375213623],[37.77900695800781, 83.12651062011719, 2.8146917819976807],[37.7752685546875, 83.0587387084961, 2.877662420272827],[37.771522521972656, 82.99166870117188, 2.84718918800354],[37.76777267456055, 82.9251480102539, 2.962515354156494],[37.74888229370117, 82.5996322631836, 3.1831748485565186],[37.686588287353516, 81.62101745605469, 4.8907928466796875],[37.67903518676758, 81.51048278808594, 4.4903459548950195],[37.67150115966797, 81.40164947509766, 2.974114418029785],[37.663944244384766, 81.2940444946289, 3.3572139739990234],[37.93735122680664, 84.4548568725586, 2.14327335357666],[37.93342208862305, 84.3742904663086, 2.6845061779022217],[37.929481506347656, 84.2945327758789, 3.023286819458008],[37.92551803588867, 84.21549987792969, 3.159334182739258],[37.92154312133789, 84.13726043701172, 3.1973867416381836],[37.91756057739258, 84.05979919433594, 2.4430813789367676],[37.91356658935547, 83.983154296875, 2.6378681659698486],[37.90955352783203, 83.9073257446289, 2.9360010623931885],[37.905555725097656, 83.83219909667969, 2.9313971996307373],[37.901554107666016, 83.75787353515625, 2.860574960708618],[37.89752960205078, 83.68418884277344, 2.6515023708343506],[37.893497467041016, 83.61131286621094, 2.6230876445770264],[37.88947296142578, 83.53915405273438, 2.4798171520233154],[37.88543701171875, 83.46768951416016, 2.4650914669036865],[37.88139343261719, 83.39678955078125, 2.6245343685150146],[37.877342224121094, 83.32652282714844, 2.844804525375366],[37.873287200927734, 83.25691986083984, 2.5013623237609863],[37.869232177734375, 83.18785095214844, 2.260329484939575],[37.865169525146484, 83.11949157714844, 2.279568910598755],[37.86110305786133, 83.0516586303711, 2.7660186290740967],[37.85703659057617, 82.98456573486328, 3.0124921798706055],[37.85297393798828, 82.91802978515625, 2.5463619232177734],[37.84889602661133, 82.85185241699219, 2.4751768112182617],[37.844825744628906, 82.78642272949219, 2.4675004482269287],[37.84076690673828, 82.7217025756836, 2.7856037616729736],[37.8366813659668, 82.65740203857422, 3.5087625980377197],[37.76572036743164, 81.6128921508789, 4.960894584655762],[37.7576789855957, 81.50230407714844, 4.141976833343506],[37.94465255737305, 84.36460876464844, 2.5618762969970703],[37.94112014770508, 84.28480529785156, 2.951575517654419],[37.93755340576172, 84.20579528808594, 3.0966625213623047],[37.93397521972656, 84.12751007080078, 3.2920920848846436],[37.93039321899414, 84.05003356933594, 2.9602105617523193],[37.926788330078125, 83.97335815429688, 2.8609964847564697],[37.923179626464844, 83.89750671386719, 2.815413475036621],[37.91954803466797, 83.8223876953125, 2.7824041843414307],[37.91591262817383, 83.74803161621094, 2.810926675796509],[37.91225814819336, 83.67432403564453, 2.641394853591919],[37.908599853515625, 83.6014175415039, 2.704953193664551],[37.90493392944336, 83.52922821044922, 2.497091293334961],[37.90125274658203, 83.45771789550781, 2.375800132751465],[37.897560119628906, 83.38672637939453, 2.678548812866211],[37.89386749267578, 83.31645202636719, 2.7414703369140625],[37.89015579223633, 83.24677276611328, 2.4619832038879395],[37.88644790649414, 83.17771911621094, 2.279106378555298],[37.88272476196289, 83.10933685302734, 2.1338891983032227],[37.87898635864258, 83.04145812988281, 2.4015815258026123],[37.8752555847168, 82.97429656982422, 2.794883966445923],[37.871517181396484, 82.90770721435547, 2.3718667030334473],[37.86777114868164, 82.84156036376953, 2.418604612350464],[37.86402130126953, 82.77608489990234, 2.692873001098633],[37.86027526855469, 82.71136474609375, 2.9189534187316895],[37.85652542114258, 82.64710235595703, 3.437138319015503],[38.02904510498047, 84.19985961914062, 2.28633713722229],[38.025089263916016, 84.12149047851562, 2.7441911697387695],[38.02111053466797, 84.04397583007812, 2.7925479412078857],[38.01713943481445, 83.96717071533203, 2.8192789554595947],[38.01315689086914, 83.89119720458984, 2.8565785884857178],[38.009159088134766, 83.81604766845703, 2.6825764179229736],[38.005157470703125, 83.74163055419922, 2.549529790878296],[38.001155853271484, 83.6678466796875, 2.478893995285034],[37.997127532958984, 83.59483337402344, 2.4445199966430664],[37.99311065673828, 83.52255249023438, 2.5415167808532715],[37.94453811645508, 82.70398712158203, 2.800896406173706],[37.94047927856445, 82.63975524902344, 3.342195987701416],[37.9120979309082, 82.20404052734375, 4.549722671508789],[37.85355758666992, 81.37351989746094, 2.2113864421844482],[38.03816223144531, 84.11512756347656, 2.356330633163452],[38.03458786010742, 84.03752899169922, 2.5379326343536377],[38.0309944152832, 83.96065521240234, 2.634751081466675],[38.02740478515625, 83.88463592529297, 2.6911823749542236],[38.023773193359375, 83.80939483642578, 2.5661978721618652],[38.0201530456543, 83.73487854003906, 2.4460647106170654],[38.016517639160156, 83.66105651855469, 2.427654504776001],[38.01286697387695, 83.5879898071289, 2.441439390182495],[38.009212493896484, 83.5156478881836, 2.564352035522461],[37.92708206176758, 82.07571411132812, 5.0],[37.879940032958984, 81.36454010009766, 2.214865207672119],[37.87240982055664, 81.2567138671875, 2.017012357711792],[38.1213493347168, 83.95445251464844, 2.159473419189453],[38.11738967895508, 83.87836456298828, 2.2497012615203857],[38.113407135009766, 83.80301666259766, 2.373938798904419],[38.109413146972656, 83.72842407226562, 2.4058194160461426],[38.105411529541016, 83.65450286865234, 2.2956418991088867],[38.101409912109375, 83.58134460449219, 2.15632700920105],[38.09739685058594, 83.50894927978516, 2.2569210529327393],[38.09339141845703, 83.43718719482422, 2.7547972202301025],[38.12732696533203, 83.79300689697266, 2.3358547687530518],[38.123714447021484, 83.7183609008789, 2.448965072631836],[38.12007522583008, 83.64440155029297, 2.5118277072906494],[38.11644744873047, 83.5711898803711, 2.3568756580352783],[38.11280059814453, 83.49878692626953, 2.41097092628479],[38.10914993286133, 83.42698669433594, 2.5703532695770264],[38.10547637939453, 83.35577392578125, 2.62913179397583],[38.1017951965332, 83.28528594970703, 2.3627049922943115],[38.21295928955078, 83.71188354492188, 2.0934014320373535],[38.204986572265625, 83.56455993652344, 2.9280953407287598],[38.19698715209961, 83.42022705078125, 2.7879798412323],[38.192970275878906, 83.34896850585938, 2.5891058444976807],[38.18896484375, 83.27841186523438, 2.730232000350952],[38.22781753540039, 83.70275115966797, 2.0495119094848633],[38.349212646484375, 84.06803894042969, 2.0121700763702393],[38.33140563964844, 83.68624114990234, 2.138538360595703],[38.20683288574219, 80.47039794921875, 2.176220417022705],[38.67897415161133, 81.11205291748047, 2.1188039779663086],[38.70475769042969, 80.0772476196289, 2.4821414947509766],[38.696990966796875, 79.98281860351562, 2.191655158996582],[38.74285125732422, 80.16153717041016, 2.027162551879883],[38.72813034057617, 79.97148132324219, 2.07271409034729],[38.816650390625, 80.15338134765625, 2.1935811042785645],[38.80110168457031, 79.96278381347656, 2.208862781524658],[34.800167083740234, 57.77042770385742, 2.621398448944092],[34.77220916748047, 57.67267990112305, 2.437161922454834],[39.05176544189453, 83.43046569824219, 2.057485580444336],[34.799964904785156, 57.7614860534668, 2.6125054359436035],[34.771446228027344, 57.663944244384766, 2.282461404800415],[38.96027374267578, 80.63172912597656, 2.2766830921173096],[38.98831558227539, 80.61992645263672, 2.146423816680908],[39.072017669677734, 80.71495819091797, 2.0949857234954834],[39.06416702270508, 80.61112213134766, 2.182204246520996],[39.107582092285156, 80.80914306640625, 2.504720687866211],[39.10016632080078, 80.70380401611328, 2.34893536567688],[39.09275817871094, 80.59988403320312, 2.9555068016052246],[39.36529541015625, 81.89237976074219, 2.145519971847534],[39.256866455078125, 80.36615753173828, 2.078371524810791],[39.28643035888672, 80.35623931884766, 2.0664966106414795],[39.44206619262695, 81.07674407958984, 2.096653461456299],[39.54389572143555, 81.4091796875, 2.0025088787078857],[39.52812957763672, 81.18028259277344, 2.445451498031616],[35.138954162597656, 56.255714416503906, 2.1729700565338135],[35.10428237915039, 56.140464782714844, 2.5761783123016357],[35.06893539428711, 56.02349853515625, 2.0032756328582764],[39.721771240234375, 82.2079086303711, 2.167546510696411],[39.71814727783203, 82.14340209960938, 2.1882874965667725],[39.714515686035156, 82.07946014404297, 2.100287437438965],[39.70721435546875, 81.95306396484375, 2.493154525756836],[35.131004333496094, 56.249385833740234, 2.075035810470581],[35.09567642211914, 56.13447570800781, 2.611675262451172],[39.824737548828125, 82.53135681152344, 2.210787534713745],[39.820831298828125, 82.4639892578125, 2.0330920219421387],[39.81692886352539, 82.39726257324219, 2.2392210960388184],[39.81300735473633, 82.3310546875, 2.1645588874816895],[39.80908966064453, 82.26542663574219, 2.236401081085205],[39.80518341064453, 82.20037078857422, 2.3030662536621094],[39.8012580871582, 82.13578796386719, 2.6429569721221924],[35.26872253417969, 56.3170051574707, 2.377582550048828],[35.23463821411133, 56.20342254638672, 2.5527725219726562],[35.19987869262695, 56.088104248046875, 2.3980112075805664],[35.164432525634766, 55.970947265625, 2.2546117305755615],[35.12830352783203, 55.852054595947266, 2.0633492469787598],[39.8548469543457, 82.72959899902344, 2.0464110374450684],[39.84415817260742, 82.52383422851562, 2.4179391860961914],[39.840572357177734, 82.45642852783203, 2.274418592453003],[39.836978912353516, 82.38958740234375, 2.6113457679748535],[39.8333740234375, 82.32331848144531, 2.5775814056396484],[39.829776763916016, 82.25764465332031, 2.7326765060424805],[39.826168060302734, 82.19252014160156, 2.693709373474121],[35.26348114013672, 56.31375503540039, 2.2420098781585693],[35.228763580322266, 56.20055389404297, 2.58099102973938],[35.193355560302734, 56.08552932739258, 2.2237823009490967],[35.157257080078125, 55.968780517578125, 2.294562578201294],[39.95232009887695, 82.93413543701172, 2.3873627185821533],[39.94846725463867, 82.86297607421875, 2.3819186687469482],[39.925201416015625, 82.44915771484375, 2.8709397315979004],[39.92129898071289, 82.38227081298828, 3.2802786827087402],[39.91737747192383, 82.31590270996094, 3.552788496017456],[35.26202392578125, 55.92186737060547, 2.618002414703369],[39.94429016113281, 82.43883514404297, 3.4601011276245117],[39.940696716308594, 82.37187194824219, 3.3616650104522705],[39.937110900878906, 82.30548095703125, 4.062738418579102],[35.252769470214844, 55.916194915771484, 2.570730447769165],[40.097511291503906, 83.7470703125, 2.088350772857666],[40.09380340576172, 83.66790771484375, 2.8790078163146973],[40.05596923828125, 82.91716766357422, 3.0744733810424805],[40.05211639404297, 82.84591674804688, 2.9031929969787598],[40.048282623291016, 82.77528381347656, 2.911480188369751],[40.04442596435547, 82.70536041259766, 2.7060062885284424],[40.040557861328125, 82.6360092163086, 2.7157206535339355],[40.036685943603516, 82.5672607421875, 3.136073112487793],[40.03279495239258, 82.49908447265625, 3.4193131923675537],[40.02892303466797, 82.43153381347656, 3.871201992034912],[39.96044158935547, 81.33501434326172, 2.9189045429229736],[39.95258712768555, 81.21897888183594, 3.325639486312866],[40.1206169128418, 83.9806900024414, 2.467169761657715],[40.117366790771484, 83.89903259277344, 2.4396443367004395],[40.11408233642578, 83.81818389892578, 2.5899105072021484],[40.11079025268555, 83.73828125, 2.718127727508545],[40.10747528076172, 83.65907287597656, 3.3098831176757812],[40.073272705078125, 82.9079360961914, 3.3990654945373535],[40.06977844238281, 82.83662414550781, 3.1593148708343506],[40.066261291503906, 82.7659912109375, 3.019055128097534],[40.062744140625, 82.69599914550781, 2.954882860183716],[40.05921173095703, 82.6265869140625, 3.172428846359253],[40.0556640625, 82.55778503417969, 3.429478406906128],[40.05211639404297, 82.48956298828125, 3.7359633445739746],[39.98512268066406, 81.32459259033203, 2.7388601303100586],[39.977783203125, 81.20843505859375, 2.853494882583618],[39.96311950683594, 80.98126983642578, 2.351497173309326],[40.208927154541016, 83.89337158203125, 2.3304295539855957],[40.20527267456055, 83.8124008178711, 2.3260905742645264],[40.17161178588867, 83.11918640136719, 3.7047817707061768],[40.167808532714844, 83.04585266113281, 3.4211578369140625],[40.16399002075195, 82.97313690185547, 3.2627480030059814],[40.16017532348633, 82.90111541748047, 3.185878038406372],[40.15633773803711, 82.82974243164062, 3.0425262451171875],[40.15250015258789, 82.75902557373047, 3.0427160263061523],[40.14865493774414, 82.6889419555664, 3.0410659313201904],[40.14479446411133, 82.61943054199219, 3.306828737258911],[40.14091873168945, 82.55059814453125, 3.5054845809936523],[40.07264709472656, 81.4343490600586, 2.8556365966796875],[40.064815521240234, 81.31635284423828, 2.713503360748291],[40.224090576171875, 83.96542358398438, 2.995525598526001],[40.220848083496094, 83.88361358642578, 2.7784359455108643],[40.21758270263672, 83.80265045166016, 3.1184022426605225],[40.18730926513672, 83.10914611816406, 3.8903262615203857],[40.18386459350586, 83.03573608398438, 3.3564417362213135],[40.18040466308594, 82.96302032470703, 3.358330726623535],[40.17692184448242, 82.89092254638672, 3.2560524940490723],[40.173439025878906, 82.81951904296875, 3.1492340564727783],[40.169944763183594, 82.748779296875, 3.1542346477508545],[40.16641616821289, 82.6786117553711, 3.3928115367889404],[40.162899017333984, 82.6091079711914, 3.889293909072876],[40.09626388549805, 81.42332458496094, 2.583225965499878],[40.088966369628906, 81.30525970458984, 2.189833879470825],[40.337337493896484, 84.46973419189453, 3.95572566986084],[40.33384704589844, 84.3824462890625, 3.175262689590454],[40.323238372802734, 84.12612915039062, 3.4042327404022217],[40.31965255737305, 84.04253387451172, 3.3278558254241943],[40.316043853759766, 83.95978546142578, 2.709055185317993],[40.31241226196289, 83.87791442871094, 3.369708776473999],[40.27522659301758, 83.10252380371094, 3.128751039505005],[40.271427154541016, 83.02906036376953, 2.9519400596618652],[40.252315521240234, 82.67155456542969, 3.3868727684020996],[40.24846649169922, 82.60199737548828, 3.8801534175872803],[40.34701156616211, 84.46399688720703, 3.9950006008148193],[40.34394836425781, 84.37664794921875, 3.287400960922241],[40.340877532958984, 84.2901840209961, 3.1411447525024414],[40.33461380004883, 84.12013244628906, 2.9325966835021973],[40.331459045410156, 84.03644561767578, 3.3059794902801514],[40.328243255615234, 83.95367431640625, 2.7245724201202393],[40.295047760009766, 83.1699447631836, 2.3244237899780273],[40.291629791259766, 83.09564971923828, 2.5852160453796387],[40.270790100097656, 82.66436004638672, 3.9998021125793457],[40.26726531982422, 82.59468841552734, 3.438436269760132],[40.208045959472656, 81.52677917480469, 2.1280527114868164],[40.44142150878906, 84.45880889892578, 3.825350522994995],[40.437957763671875, 84.371337890625, 3.7097246646881104],[40.43446350097656, 84.2848129272461, 3.3425896167755127],[40.43092727661133, 84.19924926757812, 3.596513271331787],[40.42737579345703, 84.11454010009766, 2.3618323802948],[40.423805236816406, 84.0307846069336, 2.6924707889556885],[40.42020797729492, 83.94792938232422, 2.459089994430542],[40.416603088378906, 83.86585235595703, 2.6434249877929688],[40.412967681884766, 83.78468322753906, 2.2868833541870117],[40.38330078125, 83.16342163085938, 2.1490745544433594],[40.45034408569336, 84.44892120361328, 3.7664265632629395],[40.44731140136719, 84.3614501953125, 4.345769882202148],[40.4411506652832, 84.1893310546875, 2.8912110328674316],[40.438011169433594, 84.10465240478516, 2.7006568908691406],[40.43486785888672, 84.02082824707031, 2.5051801204681396],[40.43169021606445, 83.93792724609375, 2.2634165287017822],[40.42847442626953, 83.85587310791016, 2.368095636367798],[40.42524337768555, 83.77464294433594, 2.2003371715545654],[40.31727981567383, 81.5989990234375, 2.146315813064575],[40.53078079223633, 84.09906768798828, 2.9453442096710205],[40.5272216796875, 84.01516723632812, 2.345627546310425],[40.523651123046875, 83.93212127685547, 2.206254243850708],[40.49061584472656, 83.2218017578125, 2.040937900543213],[40.538856506347656, 84.00639343261719, 2.377213716506958],[40.535701751708984, 83.92332458496094, 2.328306198120117],[40.509498596191406, 83.28849029541016, 2.008275270462036],[40.50613021850586, 83.21257781982422, 2.3389713764190674],[40.620460510253906, 83.75381469726562, 2.039095640182495],[40.63275909423828, 83.7437973022461, 2.048557996749878],[40.62952423095703, 83.66316223144531, 2.0242087841033936],[40.61639404296875, 83.34857177734375, 2.0781800746917725],[40.61304473876953, 83.27183532714844, 2.148589849472046],[41.00994110107422, 85.94200897216797, 2.0034518241882324],[41.111934661865234, 85.93917083740234, 2.236210346221924],[42.27407455444336, 88.35979461669922, 2.2984681129455566],]
        // Add colored dots for each point
        points.forEach(point => {
            const [lat, lng, value] = point;
            L.circleMarker([lat, lng], {
                radius: 5,
                fillColor: getColor(value),
                color: 'black',
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map)
              .bindPopup(`Aerosol value: ${value.toFixed(4)}`);
        });

        // Create a convex hull from the points
        const hullPoints = convexHull(points.map(p => [p[0], p[1]]));

        // Create a polygon from the hull points
        polygon = L.polygon(hullPoints, {
            color: 'blue',
            fillColor: 'transparent',
            weight: 2
        }).addTo(map);

        // Fit the map to the polygon bounds
        map.fitBounds(polygon.getBounds());

        // Add click event to the map
        map.on('click', (e: L.LeafletMouseEvent) => {
            const { lat, lng } = e.latlng;
            console.log(`Clicked coordinates: [${lat.toFixed(6)}, ${lng.toFixed(6)}]`);
        });
    });
</script>

<div bind:this={mapElement} style="height: 400px; width: 100%;"></div>
<button on:click={toggleOutline}>
    {showOutline ? 'Hide Outline' : 'Show Outline'}
</button>

<style>
    button {
        margin-top: 10px;
        padding: 5px 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    button:hover {
        background-color: #45a049;
    }
</style>